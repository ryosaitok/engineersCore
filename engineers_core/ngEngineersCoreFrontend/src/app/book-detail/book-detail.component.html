<div class="page-outer" *ngIf="book">
  <!-- 本のタイトル -->
  <div class="BookNavigation">
    <a class="amazon-book-detail" href="https://www.amazon.co.jp/dp/{{book.amazonBook}}/"
       target="_blank">
      <div class="BookNavigation-canopy u-bgUserColor">
        <div class="BookNavigation-textContainer">
          <h1 class="BookNavigation-titleText" dir="ltr">
            {{book.title}}
          </h1>
        </div>
      </div>
    </a>
  </div>

  <div class="AppContainer">
    <div class="AppContent-main u-cf">
      <!-- 左サイドバー(本の情報) -->
      <div class="SidebarBookModules">
        <!-- 本の情報 -->
        <div class="module book">
          <div class="flex-module">
            <div class="flex-module-header"></div>
            <div class="js-book-detail dashboard-book-detail flex-module-inner" data-section-id="wtf"
                 style="opacity: 1;">
              <div class="book-image item">
                <div class="BookImageItem-context">
                  <div class="content">
                    <a class="amazon-book-detail" href="https://www.amazon.co.jp/dp/{{book.amazonBook}}/"
                       target="_blank">
                      <img border="0"
                           src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN={{book.amazonBook}}&Format=_SL250_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&language=ja_JP"></a><img
                    src="https://ir-jp.amazon-adsystem.com/e/ir?language=ja_JP&l=li3&o=9&a={{book.amazonBook}}"
                    width="1"
                    height="1" border="0" alt="" style="border:none !important; margin:0px !important;"/>
                  </div>
                </div>
              </div>
              <div class="book-basic-info item">
                <div class="BookBasicInfoItem-context">
                  <div class="content">
                    <div class="book-info-text book-title">
                      <a class="amazon-book-detail" href="https://www.amazon.co.jp/dp/{{book.amazonBook}}/"
                         target="_blank">
                        <strong><b>{{book.title}}</b></strong>
                      </a>
                    </div>
                    <div class="book-info-text book-author">
                      <span><b>{{book.authorName}}</b></span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="book-detail-info item">
                <div class="BookDetailInfoItem-context">
                  <div class="content">
                    <div class="book-info-text book-sale-date">
                      <span><b>{{book.saleDate | date:"yyyy年M月d日" }} 発売</b></span>
                    </div>
                    <div class="book-info-text book-page-count">
                      <span><b>{{book.pagesCount}} ページ</b></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- 本の読んだ・読みたい登録 -->
        <div class="module register">
          <div class="flex-module">
            <div class="flex-module-header">
              <strong>本の登録</strong>
            </div>
            <div class="js-book-detail dashboard-book-detail flex-module-inner" data-section-id="wtf"
                 style="opacity: 1;">
              <div class="book-read item">
                <div class="BookReadItem-context">
                  <div class="content">
                    <div class="book-read">
                      <div class="book-action-button">
                        <div>
                          <form #f="ngForm" (ngSubmit)="registerBookComment(f)" novalidate>
                            <input type="hidden" [(ngModel)]="book.id" name="bookId" ngModel>
                            <div class="form-group"><textarea placeholder="本の感想は？" cols='30' rows='3' type="text"
                                                              name="comment" ngModel
                                                              required></textarea></div>
                            <div class="form-group">読んだ日：<input type="date" name="readDate" ngModel required></div>
                            <button type="submit" class="btn btn-primary"><strong><b>読んだ本として登録する</b></strong></button>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="interested-read item">
                <div class="BookInterestedItem-context">
                  <div class="content">
                    <div class="book-interested">
                      <div class="book-action-button">
                        <div *ngIf="!isInterested">
                          <form (ngSubmit)="interested(book.id)">
                            <button type="submit" class="btn btn-primary"><strong><b>読みたい本に登録する</b></strong></button>
                          </form>
                        </div>
                        <div *ngIf="isInterested">
                          <form (ngSubmit)="notInterested(book.id)">
                            <button type="submit" class="btn btn-success"><strong><b>読みたい本に登録済み</b></strong></button>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- 本のリアクション -->
        <div class="module reaction">
          <div class="flex-module">
            <div class="flex-module-header">
              <strong>本のデータ</strong>
            </div>
            <div class="js-book-reaction dashboard-book-reaction flex-module-inner" data-section-id="wtf"
                 style="opacity: 1;">
              <div class="book-comment item">
                <div class="BookCommentItem-context">
                  <div class="content">
                    <div class="book-comment-count">
                      <!-- TODO -->
                      <strong><b>{{bookCommentCount}}人がコメントしています</b></strong>
                    </div>
                  </div>
                </div>
              </div>
              <div class="book-interested item">
                <div class="BookInterestedCountItem-context">
                  <div class="content">
                    <div class="book-interested-count">
                      <!-- TODO -->
                      <strong><b>{{bookInterestedCount}}人が興味を持っています</b></strong>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- メインメニュー(本の読んだコメント) -->
      <div class="BookCommentsModules">
        <!-- 本の情報 -->
        <div class="module bookComments">
          <div *ngIf="bookComments.length > 0" class="comment-module">
            <div *ngFor="let comment of bookComments" class="js-book-comments book-comment-content flex-module-inner"
                 data-section-id="wtf" style="opacity: 1;">
              <!--              <a routerLink="/bookcomment/{{comment.id}}/">-->
              <div class="book-comment">
                <div class="BookCommentItem-context">
                  <!-- いいねしたユーザーの情報など -->
                  <div class="context"></div>
                  <div class="comment-content">
                    <div class="comment-user">
                      <a routerLink="/user/{{comment.user.account_name}}">
                        <div class="comment-user">
                          <div *ngIf="comment.user.profile_image_link !== null" class="user-icon">
                            <img class="avatar" src="../../assets/image/profile/{{comment.user.profile_image_link}}"
                                 alt=""/>
                          </div>
                          <div *ngIf="comment.user.profile_image_link === null" class="user-icon">
                            <img class="avatar" src="../../assets/image/profile/default_profile_image.png" alt=""/>
                          </div>
                          <div class="user-name">
                            {{comment.user.user_name}}(@{{comment.user.account_name}})
                          </div>
                        </div>
                      </a>
                    </div>
                    <div class="comment-date">
                      ・{{comment.comment_date | date:"yyyy年M月d日" }}
                    </div>
                    <div class="comment-text pre-wrap">
                      {{comment.comment_text}}
                    </div>
                    <div class="comment-reaction">
                      <ul class="comment-reactions">
                        <li>
                          <ul class="comment-replies comment-reaction">
                            <li>
                              <a class="comment-reaction-reply" href="">
                                <fa-icon [icon]="faCommentDots"></fa-icon>
                              </a>
                            </li>
                            <li>{{comment.reply_ids.length}}</li>
                          </ul>
                        </li>
                        <li>
                          <ul class="comment-favorites comment-reaction">
                            <li>
                              <a class="comment-reaction-heart" href="">
                                <fa-icon [icon]="faHeart"></fa-icon>
                              </a>
                            </li>
                            <li>{{comment.favorite_ids.length}}</li>
                          </ul>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
              <!--              </a>-->
            </div>
          </div>
          <div *ngIf="bookComments.length === 0" class="comment-module">
            <div class="no-comment-text">
              <span>まだ読んだコメントはありません。</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 右サイドバー -->

  </div>
</div>
